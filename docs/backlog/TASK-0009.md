# TASK-0009: Acessibilidade basica (skip link e labels de formulario)

## Metadata
- **ID**: TASK-0009
- **Branch**: feature/TASK-0009
- **Depends on**: NONE
- **PRD Reference**: PRD-0002
- **Quick Wins Cobertos**: MA-001, MA-004
- **Tempo Estimado**: 0.75h

## Objetivo

Implementar dois requisitos fundamentais de acessibilidade WCAG 2.1 Nivel A: um skip link para permitir que usuarios de teclado pulem o cabecalho e acessem diretamente o conteudo principal, e labels adequados no formulario de agendamento para que leitores de tela anunciem corretamente os campos.

## Escopo Tecnico

### MA-001: Adicionar skip link para navegacao rapida

**Criterio WCAG**: 2.4.1 Bypass Blocks (Nivel A)

**Arquivos afetados:**
- `index.html` - adicionar o link antes de `<div id="root">`
- `src/App.tsx` - adicionar `id="conteudo-principal"` ao elemento principal
- `src/estilos/globais.css` - adicionar estilos do skip link

**Abordagem sugerida:**
- Adicionar `<a href="#conteudo-principal" class="skip-link">Pular para o conteudo principal</a>` em `index.html` antes do `<div id="root">`
- Estilizar para ficar invisivel por padrao (`position: absolute; top: -40px`) e visivel apenas ao receber foco (`:focus { top: 0 }`)
- Adicionar `id="conteudo-principal"` e `tabindex="-1"` no container principal em `App.tsx` para receber foco programatico
- Usar z-index alto para garantir visibilidade sobre outros elementos

**Edge cases a considerar:**
- Skip link deve ser o PRIMEIRO elemento focavel da pagina (Tab direto nele)
- Em mobile, verificar que nao interfere no layout
- Garantir que funciona tanto na pagina principal quanto na pagina do profissional
- O elemento de destino precisa de `tabindex="-1"` para receber foco via ancora

### MA-004: Adicionar labels de formulario

**Criterio WCAG**: 1.3.1 Info and Relationships (Nivel A), 3.3.2 Labels or Instructions (Nivel A)

**Arquivos afetados:**
- `src/componentes/CalendarioAgendamento/CalendarioAgendamento.tsx` (linhas ~125-133) - input de nome do paciente
- `src/componentes/CalendarioAgendamento/CalendarioAgendamento.module.css` - estilo para instrucao

**Estado atual:**
O campo de nome usa `<h3>` como titulo e `placeholder` como unica indicacao, sem `<label>` associado ao `<input>`.

**Abordagem sugerida:**
- Substituir o `<h3>` por `<label htmlFor="nome-paciente">`
- Adicionar `id="nome-paciente"` ao input
- Adicionar atributos `required` e `aria-required="true"` ao input
- Adicionar `<span id="nome-instrucao">` com texto descritivo e `aria-describedby="nome-instrucao"` no input
- Estilizar o label para manter a aparencia visual do h3 anterior
- Manter a classe CSS `.subtitulo` no label para preservar estilo visual

**Edge cases a considerar:**
- Manter estilos visuais identicos ao `<h3>` atual para nao causar regressao visual
- Verificar que o `placeholder` continua funcionando
- Verificar que `onChange` e `value` continuam vinculados corretamente
- O span de instrucao pode ser visualmente oculto mas acessivel (ou visivel como texto auxiliar)

## Criterios de Aceitacao

- [ ] Ao pressionar Tab no carregamento da pagina, o primeiro elemento focado e o skip link
- [ ] Skip link e visivel apenas quando focado (invisivel por padrao)
- [ ] Clicar no skip link ou pressionar Enter move foco para conteudo principal
- [ ] Input de nome do paciente possui `<label>` associado via `htmlFor`/`id`
- [ ] Input possui `aria-required="true"` e `required`
- [ ] Input possui `aria-describedby` apontando para instrucao descritiva
- [ ] Clicar no label foca automaticamente o input
- [ ] `npm run build` executa sem erros
- [ ] `npm run lint` passa sem erros

## Test Strategy
- Unit tests: Nao
- API tests: Nao
- Integration tests: Nao
- Validacao manual: Sim - testar navegacao por teclado (Tab, Enter), verificar associacao label/input no DevTools, testar com extensao de acessibilidade

## Definition of Done
- [ ] Codigo implementado conforme especificacao
- [ ] Build passando (`npm run build` sem erros)
- [ ] Lint passando (`npm run lint` sem erros)
- [ ] Skip link funcional via teclado
- [ ] Label associado ao input no DevTools (Accessibility tree)
- [ ] Code review aprovado pelo Tech Lead
- [ ] QA validado pelo Tech Lead

## Status: DONE

## Code Review & QA (Consolidated) - 2026-02-08

### Resultado: APROVADO

**Build**: OK (vite v7.3.1, 57 modules, 521ms)
**Lint**: OK (0 warnings, 0 errors)
**ADR**: ADR-0002 criado

### Verificacao Tecnica
- [x] Skip link implementado em index.html, visivel apenas ao foco
- [x] id="conteudo-principal" adicionado em App.tsx
- [x] Label acessivel associado ao input de nome do paciente
- [x] Atributos ARIA (aria-required, aria-describedby) adicionados
- [x] Build passando sem erros
- [x] Lint passando sem erros

### Verificacao de Negocio (PRD-0002)
- [x] MA-001: Skip link para navegacao por teclado - ATENDIDO
- [x] MA-004: Labels de formulario acessiveis - ATENDIDO
