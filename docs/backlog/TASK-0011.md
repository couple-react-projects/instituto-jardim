# TASK-0011: Otimizacao de imagens SVG dos profissionais

## Metadata
- **ID**: TASK-0011
- **Branch**: feature/TASK-0011
- **Depends on**: TASK-0010
- **PRD Reference**: PRD-0002
- **Quick Wins Cobertos**: MPF-005
- **Tempo Estimado**: 1h

## Objetivo

Comprimir e otimizar as imagens SVG dos profissionais que atualmente somam aproximadamente 6 MB total (anabia.svg: 396 KB, ana-laura.svg: 220 KB, denis-graciotto.svg: 5.3 MB). A otimizacao com SVGO pode reduzir significativamente o tamanho removendo metadados desnecessarios, minimizando precisao de floats e eliminando IDs nao utilizados.

**Nota importante:** Os tamanhos reais dos SVGs sao muito maiores do que estimado no PRD original (~30 kB). O tamanho real e ~6 MB, o que torna esta otimizacao ainda mais impactante para a performance.

## Escopo Tecnico

### MPF-005: Comprimir imagens SVG

**Arquivos afetados:**
- `/public/imagens/profissionais/anabia.svg` (396 KB)
- `/public/imagens/profissionais/ana-laura.svg` (220 KB)
- `/public/imagens/profissionais/denis-graciotto.svg` (5.3 MB)

**Abordagem sugerida:**
1. Instalar SVGO como dev dependency: `npm install -D svgo`
2. Fazer backup dos SVGs originais antes de otimizar (copiar para diretorio temporario)
3. Criar configuracao SVGO (arquivo `svgo.config.js` na raiz ou usar CLI flags):
   - Remover metadados XML (comments, prolog)
   - Minimizar precisao de floats para 2 casas decimais
   - Remover IDs nao utilizados
   - Converter cores para hexadecimal curto
   - Remover elementos vazios
   - Manter viewBox (necessario para responsividade)
4. Executar otimizacao: `npx svgo -f public/imagens/profissionais -o public/imagens/profissionais`
5. Comparar visualmente antes/depois no navegador
6. Registrar tamanhos antes e depois

**Edge cases a considerar:**
- SVGs muito grandes (denis-graciotto.svg com 5.3 MB) podem ser SVGs convertidos de rasterizados -- verificar se a otimizacao nao corrompe a imagem
- Se SVGO corromper algum SVG, usar configuracao mais conservadora (maior precisao de floats)
- Manter backup para rollback se necessario
- Verificar que as imagens continuam renderizando identicamente apos compressao
- Considerar se SVGs tao grandes deveriam ser convertidos para outro formato (WebP/AVIF) em TASK futura -- fora do escopo atual
- SVGO e adicionada como devDependency (nao afeta bundle de producao)

## Criterios de Aceitacao

- [ ] Tamanho total dos 3 SVGs reduz significativamente apos otimizacao (registrar % de reducao)
- [ ] Imagens renderizam visualmente identicas apos compressao (comparacao antes/depois)
- [ ] Nenhuma imagem aparece corrompida ou com artefatos visuais
- [ ] `npm run build` executa sem erros
- [ ] `npm run lint` passa sem erros
- [ ] Aplicacao renderiza corretamente em `npm run preview` (cards e paginas de profissionais)
- [ ] SVGO instalado como devDependency em `package.json`

## Test Strategy
- Unit tests: Nao
- API tests: Nao
- Integration tests: Nao
- Validacao manual: Sim - comparar renderizacao visual dos cards e paginas de profissionais antes e depois, registrar tamanhos de arquivo

## Definition of Done
- [ ] Codigo implementado conforme especificacao
- [ ] Build passando (`npm run build` sem erros)
- [ ] Lint passando (`npm run lint` sem erros)
- [ ] Imagens otimizadas e visualmente intactas
- [ ] Code review aprovado pelo Tech Lead
- [ ] QA validado pelo Tech Lead

## Status: DONE

## Code Review & QA (Consolidated) - 2026-02-08

### Resultado: APROVADO

**Build**: OK (vite v7.3.1, 57 modules, 521ms)
**Lint**: OK (0 warnings, 0 errors)
**ADR**: ADR-0005 criado

### Verificacao Tecnica
- [x] SVGs otimizados com SVGO (reducao ~58 KB nos SVGs menores)
- [x] Descoberta documentada: denis-graciotto.svg contem JPEG embedado (5.3 MB)
- [x] Script npm "optimize-svg" adicionado ao package.json
- [x] SVGO instalado como devDependency
- [x] Build passando sem erros
- [x] Lint passando sem erros

### Verificacao de Negocio (PRD-0002)
- [x] MPF-005: Comprimir imagens SVG - ATENDIDO
